<!DOCTYPE html><!-- Last Published: Wed Dec 15 2021 03:30:55 GMT+0000 (Coordinated Universal Time) -->
<html data-wf-domain="www.gorushbn.com" data-wf-page="619aec746a76b6037a56970d" data-wf-site="60c07eac9c060ec803c8dfb9"
    lang="ms">

<head>
    <meta charset="utf-8" />
    <title>Get All Task From Tookan</title>
    <meta content="Get All Task From Tookan" property="og:title" />
    <meta content="Get All Task From Tookan" property="twitter:title" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="google-site-verification=lcyr4z6tSIXgvFjlmUgQiWhb6AYZqS82K7th1v236x4"
        name="google-site-verification" />
    <link href="https://global-uploads.webflow.com/60c07eac9c060ec803c8dfb9/css/gorushbn.webflow.f27181533.css"
        rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">
        WebFont.load({
            google: {
                families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic", "Poppins:200,regular,italic,600,800"]
            }
        });
    </script>
    <!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif]-->
    <script type="text/javascript">
        ! function (o, c) {
            var n = c.documentElement,
                t = " w-mod-";
            n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
        }(window, document);
    </script>
    <link href="https://global-uploads.webflow.com/60c07eac9c060ec803c8dfb9/60d91ee06cf847555bd4698d_gorush32x32.png"
        rel="shortcut icon" type="image/x-icon" />
    <link href="https://global-uploads.webflow.com/60c07eac9c060ec803c8dfb9/60d91f276b83801fb73fa2e5_gorush256x256.png"
        rel="apple-touch-icon" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <style>
        * {
            -webkit-font-smoothing: antialiased;
        }

        .gradient {
            pointer-events: none;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/resources/demos/style.css">

</head>

<body class="body-6">
    <h1 class="heading-59">Get All Task From Tookan</h1>
    <div class="w-layout-grid grid-100"><a id="submitAgain" href="#"
            class="button-62 w-node-a7a1259d-6e3b-0e79-88be-e8347cf6f7d6-7a56970d w-button">Submit Again</a>
        <p id="pleasewait" class="paragraph-100 w-node-_40b94277-be91-21d3-5a3e-0cbffa876104-7a56970d">Please wait...
        </p>
        <div id="submitNumArea" class="div-block-174 w-node-f646788e-d0cb-a8d7-44cf-6b355f9d2b12-7a56970d">
            <p class="paragraph-116">Job Status:*</p>
            <div class="html-embed-68 w-embed"><select name="requestedJobStatus" id="requestedJobStatus"
                    class="select-field-50 w-select" style="border-radius: 5px;">
                    <option value="">Select one...</option>
                    <option value="0">Assigned</option>
                    <option value="1">Started</option>
                    <option value="2">Successful</option>
                    <option value="3">Failed</option>
                    <option value="4">InProgress/Arrived</option>
                    <option value="6">Unassigned</option>
                    <option value="7">Accepted/Acknowledged </option>
                    <option value="8">Decline</option>
                    <option value="9">Cancel</option>
                    <option value="10">Deleted</option>
                </select></div>
            <p class="paragraph-117">Start Date:*</p>
            <div class="html-embed-70 w-embed"><input id="requestedStartDate" name="requestedStartDate" type="text"
                    style="border-radius: 5px; text-align:center;"></div>
            <p class="paragraph-118">End Date:*</p>
            <div class="html-embed-69 w-embed"><input id="requestedEndDate" name="requestedEndDate" type="text"
                    style="border-radius: 5px; text-align:center;"></div>
            <p class="paragraph-99">Requested page number:</p>
            <div class="html-embed-61 w-embed"><input id="requestedPage" name="requestedPage" type="text"
                    placeholder="1" style="border-radius: 5px; text-align:center;"></div>
            <p class="paragraph-119">Agent Name:</p>
            <div class="w-embed"><select name="requestedFleet" id="requestedFleet" class="select-field-50 w-select"
                    style="border-radius: 5px;">
                    <option value="">Select one...</option>
                    <option value="994634">FD SOWDEQ</option>
                    <option value="997381">FD RAHIM</option>
                    <option value="1029275">FD AIMI</option>
                    <option value="1050947">FD HASBUL</option>
                    <option value="1071388">FD FADARUS</option>
                    <option value="1079095">FD HAMIDIN</option>
                    <option value="1113078">FD HANAFI</option>
                    <option value="1230427">FD FAEZ</option>
                    <option value="1254189">FDZUL</option>
                </select></div>
        </div><a id="submitNum" href="#"
            class="button-61 w-node-_8254f33f-fb2b-2307-fd79-f6c0c7cd0095-7a56970d w-button">Submit</a>
        <div id="tasklist" class="div-block-171 w-node-_55c3c0b5-235c-d1df-f393-cdf954a251de-7a56970d"></div>
    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=60c07eac9c060ec803c8dfb9"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <script src="https://global-uploads.webflow.com/60c07eac9c060ec803c8dfb9/js/webflow.97fd37cd1.js"
        type="text/javascript"></script>

    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
        $(function () {
            $("#requestedStartDate").datepicker({
                dateFormat: "yy-mm-dd"
            });
            $("#requestedEndDate").datepicker({
                dateFormat: "yy-mm-dd"
            });
        });
    </script>
    <script>
        document.getElementById("pleasewait").style.display = 'none';
        document.getElementById("submitAgain").style.display = 'none';
        document.getElementById("tasklist").style.display = 'none';

        document.addEventListener("DOMContentLoaded", function (event) {
            document.getElementById("submitNum").addEventListener("click", submitNum);

            function submitNum() {

                document.getElementById("submitNumArea").style.display = 'none';

                document.getElementById("submitNum").style.display = 'none';

                document.getElementById("pleasewait").style.display = 'inline';

                reqJobStatus = document.getElementById("requestedJobStatus").value;
                reqStartDate = document.getElementById("requestedStartDate").value;
                reqEndDate = document.getElementById("requestedEndDate").value;
                reqPage = document.getElementById("requestedPage").value;
                reqFleet = document.getElementById("requestedFleet").value;

                var countnumtask = 0;
                var responsegat = '';
                var json_responsegat = '';

                var request = new XMLHttpRequest();

                request.open('POST', 'https://api.tookanapp.com/v2/get_all_tasks');

                request.setRequestHeader('Content-Type', 'application/json');

                request.onreadystatechange = function () {
                    if (this.readyState === 4) {
                        console.log('Status:', this.status);
                        console.log('Headers:', this.getAllResponseHeaders());
                        console.log('Body:', this.responseText);
                        responsegat = this.responseText;
                        json_responsegat = JSON.parse(responsegat);

                        let table = document.createElement('table');
                        table.setAttribute("id", "tasklisttable");
                        table.className = "table table-striped table-hover table-bordered table-responsive";
                        let thead = document.createElement('thead');
                        let tbody = document.createElement('tbody');

                        table.appendChild(thead);
                        table.appendChild(tbody);

                        document.getElementById('tasklist').appendChild(table);

                        document.getElementById("pleasewait").style.display = 'none';

                        // Creating and adding data to first row of the table
                        let row_1 = document.createElement('tr');
                        let heading_1 = document.createElement('th');
                        heading_1.innerHTML = "Tracking";
                        let heading_2 = document.createElement('th');
                        heading_2.innerHTML = "Order ID";
                        let heading_3 = document.createElement('th');
                        heading_3.innerHTML = "Name";
                        let heading_4 = document.createElement('th');
                        heading_4.innerHTML = "Address";
                        let heading_5 = document.createElement('th');
                        heading_5.innerHTML = "Phone";
                        let heading_6 = document.createElement('th');
                        heading_6.innerHTML = "Price";
                        let heading_7 = document.createElement('th');
                        heading_7.innerHTML = "Agent Name";
                        let heading_8 = document.createElement('th');
                        heading_8.innerHTML = "Completed Date";

                        row_1.appendChild(heading_1);
                        row_1.appendChild(heading_2);
                        row_1.appendChild(heading_3);
                        row_1.appendChild(heading_4);
                        row_1.appendChild(heading_5);
                        row_1.appendChild(heading_6);
                        row_1.appendChild(heading_7);
                        row_1.appendChild(heading_8);
                        thead.appendChild(row_1);

                        countnumtask = json_responsegat.data["length"];

                        for (let i = 0; i < countnumtask; i++) {

                            var today = new Date(json_responsegat.data[i].completed_datetime);
                            var date = today.getDate() + '-' + (today.getMonth() + 1) + '-' + today.getFullYear();

                            var ampm = '';
                            var ampmhour = '';
                            var ampmmin = '';

                            if (today.getHours() < 12) {
                                ampm = 'am';
                                ampmhour = (today.getHours());
                            }

                            if (today.getHours() == 12) {
                                ampm = 'pm';
                                ampmhour = (today.getHours());
                            }

                            if (today.getHours() > 12) {
                                ampm = 'pm';
                                ampmhour = (today.getHours() - 12);
                            }

                            if (today.getMinutes() < 10) {
                                ampmmin = "0" + (today.getMinutes());
                            }

                            if (today.getMinutes() >= 10) {
                                ampmmin = (today.getMinutes());
                            }
                            var time = ampmhour + ":" + ampmmin + " " + ampm;

                            var dateTime = date + ' ' + time;

                            let row_2 = document.createElement('tr');

                            let row_2_data_1 = document.createElement('td');
                            row_2_data_1.innerHTML = json_responsegat.data[i].job_id;
                            let row_2_data_2 = document.createElement('td');
                            row_2_data_2.innerHTML = json_responsegat.data[i].order_id;
                            let row_2_data_3 = document.createElement('td');
                            row_2_data_3.innerHTML = json_responsegat.data[i].customer_username;
                            let row_2_data_4 = document.createElement('td');
                            row_2_data_4.innerHTML = json_responsegat.data[i].job_address;
                            let row_2_data_5 = document.createElement('td');
                            row_2_data_5.innerHTML = json_responsegat.data[i].customer_phone;
                            let row_2_data_6 = document.createElement('td');
                            row_2_data_6.innerHTML = json_responsegat.data[i].job_description;
                            let row_2_data_7 = document.createElement('td');
                            row_2_data_7.innerHTML = json_responsegat.data[i].fleet_name;
                            let row_2_data_8 = document.createElement('td');
                            row_2_data_8.innerHTML = dateTime;

                            row_2.appendChild(row_2_data_1);
                            row_2.appendChild(row_2_data_2);
                            row_2.appendChild(row_2_data_3);
                            row_2.appendChild(row_2_data_4);
                            row_2.appendChild(row_2_data_5);
                            row_2.appendChild(row_2_data_6);
                            row_2.appendChild(row_2_data_7);
                            row_2.appendChild(row_2_data_8);
                            tbody.appendChild(row_2);
                        }

                        document.getElementById("tasklist").style.display = 'block';

                        document.getElementById("submitAgain").style.display = 'block';
                        document.getElementById("submitAgain").addEventListener("click", function () {
                            document.getElementById("submitNum").style.display = 'block';
                            document.getElementById("submitAgain").style.display = 'none';
                            document.getElementById("submitNumArea").style.display = 'block';
                            document.getElementById("tasklist").style.display = 'none';
                            document.getElementById("tasklist").innerHTML = "";
                        });
                    }
                };

                var body = {
                    "api_key": "51676580f24b091114132d38111925401ee4c2f328d978375e1f03",
                    "job_status": reqJobStatus,
                    "job_type": 1,
                    "start_date": reqStartDate,
                    "end_date": reqEndDate,
                    "custom_fields": 1,
                    "is_pagination": 0,
                    "requested_page": reqPage,
                    "customer_id": "",
                    "fleet_id": reqFleet,
                    "job_id": [],
                    "order_id": [],
                    "team_id": 921691
                }
                request.send(JSON.stringify(body));
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>
